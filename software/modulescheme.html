<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software module scheme &mdash; Sigma2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/nris.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/nris.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://siteimproveanalytics.com/js/siteanalyze_6036825.js"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installed software" href="installed_software.html" />
    <link rel="prev" title="Python libraries" href="../code_development/guides_python.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Sigma2/NRIS documentation
              <img src="../_static/NRIS Logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Policies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code-of-conduct.html">Code of Conduct</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/support_line.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/extended_support.html">Extended support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/user_communities.html">User communities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/lost_forgotten_password.html">Lost, expiring or changing passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/project_leader_support.html">Project leader support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../training/events.html">Training events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/notes_qa.html">Questions, Answers and Feedbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/videos.html">Training Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/material.html">Training materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/opslog.html">Using the status system (opslog)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_account.html">How do I get an account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_development/guides/vs_code/connect_to_server.html">Connecting to a system with Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/remote-desktop.html">Remote Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/R.html">First R calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nird_archive/user-guide.html">Research Data Archive (NIRD RDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/easydmp-user-documentation.html">EasyDMP User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/migration2metacenter.html">Migration to an NRIS HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../computing/responsible-use.html">Using shared resources responsibly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/overview.html">Running jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../computing/tuning-applications.html">Tuning applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code development and tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code_development/overview.html">Code development and tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software module scheme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#which-modules-are-currently-loaded">Which modules are currently loaded?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#which-modules-are-available">Which modules are available?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-load-a-module">How to load a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-unload-a-module">How to unload a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-switch-to-a-different-version-of-a-module">How to switch to a different version of a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-save-and-restore-your-module-environment">How to save and restore your module environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-on-module-system-for-software">Tutorial on module system for software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installed_software.html">Installed software</a></li>
<li class="toctree-l1"><a class="reference internal" href="userinstallsw.html">Installing software as user</a></li>
<li class="toctree-l1"><a class="reference internal" href="appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Licence and access policies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Files, storage and backup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/nird_lmd.html">NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/quota.html">Storage quota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files_storage/performance.html">Optimizing storage performance</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sigma2/NRIS documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Software module scheme</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/UNINETTSigma2/documentation/blob/main/software/modulescheme.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="software-module-scheme">
<span id="module-scheme"></span><h1>Software module scheme<a class="headerlink" href="#software-module-scheme" title="Link to this heading"></a></h1>
<p>Since a HPC cluster is shared among many users, and also holds a significant size in contrast to most desktop compute machinery around, the amount of installed software spans many applications in many different versions and quite a few of them are installed typically non-standard places for easier maintenance (for admin crew), practical and security reasons. It is not possible (nor desirable) to use them all at the same time, since different versions of the same application may conflict with each other. Therefore, it is practical to provide the production environment for a given application outside of the application itself. This is done using a set of instructions and variable settings that are specific for the given application called an application module. This also simplifies control of which application versions are available in a specific session.</p>
<p>The main command for using this system is the module command. You can find a list of all its options by typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module --help
</pre></div>
</div>
<p>We use the lmod module system; for more info see <a class="reference external" href="https://lmod.readthedocs.io/en/latest/">https://lmod.readthedocs.io/en/latest/</a> in NRIS currently. Below we listed the most commonly used options, but also feel free to ivestigate options in this toolset more thoroughly on developers site.</p>
<section id="which-modules-are-currently-loaded">
<h2>Which modules are currently loaded?<a class="headerlink" href="#which-modules-are-currently-loaded" title="Link to this heading"></a></h2>
<p>To see the modules currently active in your session, use the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module list
</pre></div>
</div>
</section>
<section id="which-modules-are-available">
<h2>Which modules are available?<a class="headerlink" href="#which-modules-are-available" title="Link to this heading"></a></h2>
<p>In order to see a complete list of available modules, issue the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module avail
</pre></div>
</div>
<p>The resulting list will contain module names conforming to the following pattern:</p>
<ul class="simple">
<li><p>name of the module</p></li>
<li><p>/</p></li>
<li><p>version</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">avail</span></code> option can also be used to search for specific software, e.g.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module avail netcdf
</pre></div>
</div>
<p>will list all modules matching the string “netcdf” (case insensitive).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some modules are mainly intended as dependencies for others, and are typically
not very useful by themselves. Such modules are made hidden to the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code>
command to avoid cluttering the listed output. However, if you are compiling
your own code some of these might still be useful, and you can still load them.
To include hidden modules you can add the <code class="docutils literal notranslate"><span class="pre">--show-hidden</span></code> option to the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code> search.</p>
</div>
</section>
<section id="how-to-load-a-module">
<h2>How to load a module<a class="headerlink" href="#how-to-load-a-module" title="Link to this heading"></a></h2>
<p>In order to make, for instance, the NetCDF library available issue the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module load netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19
</pre></div>
</div>
<p>Note that we currently do <strong>not have</strong> default modules on NRIS machines, so you need to write full module name when loading!</p>
</section>
<section id="how-to-unload-a-module">
<h2>How to unload a module<a class="headerlink" href="#how-to-unload-a-module" title="Link to this heading"></a></h2>
<p>Keeping with the above example, use the following command to unload the NetCDF module again:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module unload netCDF
</pre></div>
</div>
<p>Note that this will only unload the loaded module with “netCDF/”-namebase, in this case the module named netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19. To unload everything you can type</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module purge
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code> command will inform you that some modules (like <code class="docutils literal notranslate"><span class="pre">StdEnv</span></code>)
were not unloaded. Such modules are made “sticky” because they are necessary
for the system to work, and they should not be <code class="docutils literal notranslate"><span class="pre">--force</span></code> purged as the message
suggest. If this warning message annoys you, you can suppress it with the <code class="docutils literal notranslate"><span class="pre">--quiet</span></code>
option instead.</p>
</div>
</section>
<section id="how-to-switch-to-a-different-version-of-a-module">
<h2>How to switch to a different version of a module<a class="headerlink" href="#how-to-switch-to-a-different-version-of-a-module" title="Link to this heading"></a></h2>
<p>Switching to another version is similar to loading a specific version. As an example, if you want to switch from the current loaded netCDF to an older one; netCDF/4.4.0-intel-2016a:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module switch netCDF/4.4.1.1-intel-2018a-HDF5-1.8.19 netCDF/4.4.0-intel-2016a
</pre></div>
</div>
<p>This, more compact syntax will fortunately also work:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module switch netCDF netCDF/4.4.0-intel-2016a
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are using self-contained modules in NRIS, meaning that a given module
loads all dependecies necessary. This is in slight contrast to old policies and also means it is possible
to make a mess if you load extra modules in job scripts after loading the main software module.
We recommend doing <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">list</span></code> after every load (to inspect) and unloading any
conflicting packages, if possible. It is also good practice to start all job scripts
with a <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code>, before loading all necessary modules for the calculation.</p>
</div>
</section>
<section id="how-to-save-and-restore-your-module-environment">
<h2>How to save and restore your module environment<a class="headerlink" href="#how-to-save-and-restore-your-module-environment" title="Link to this heading"></a></h2>
<p>When you have loaded all necessary modules for a particular purpose and made sure that
your environment is working correctly, you can save it with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module save &lt;name-of-env&gt;
</pre></div>
</div>
<p>and later restore it with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module restore &lt;name-of-env&gt;
</pre></div>
</div>
<p>To list all your saved environments</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module savelist
</pre></div>
</div>
<p>This feature is particularly convenient if you spend a lot of time compiling/debugging
in interactive sessions. For production calculations using job scripts it is still
recommended to load each module explicitly for clarity.</p>
</section>
<section id="tutorial-on-module-system-for-software">
<h2>Tutorial on module system for software<a class="headerlink" href="#tutorial-on-module-system-for-software" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://training.pages.sigma2.no/tutorials/hpc-intro/episodes/14-modules.html">Introduction to HPC - Accessing software</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../code_development/guides_python.html" class="btn btn-neutral float-left" title="Python libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installed_software.html" class="btn btn-neutral float-right" title="Installed software" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sigma2/NRIS. Text shared under CC-BY 4.0 license.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<!-- Integrate opslog banner -->
<span class="sp-status"></span>
<script>
  window.statuspalWidget = {
    subdomain: 'sigma2-nris',
    host: 'https://statuspal.eu',
    badge: {
      enabled: false,
      selector: '.sp-status', 
    },
    banner: {
      enabled: true,
      position: 'top-right',
    }
  }
</script>
<script src="https://statuspal.io/js/widget.js"></script>


</body>
</html>