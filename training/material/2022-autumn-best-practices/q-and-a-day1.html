<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Questions and answers from Best Practices on NRIS Clusters Nov 2022, Day 1 (Nov 1) &mdash; Sigma2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/nris.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/nris.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://siteimproveanalytics.com/js/siteanalyze_6036825.js"></script>
        <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Sigma2/NRIS documentation
              <img src="../../../_static/NRIS Logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Policies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../code-of-conduct.html">Code of Conduct</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/support_line.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/extended_support.html">Extended support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/user_communities.html">User communities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/lost_forgotten_password.html">Lost, expiring or changing passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/project_leader_support.html">Project leader support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../events.html">Training events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notes_qa.html">Questions, Answers and Feedbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Training Video Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../material.html">Training materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/opslog.html">Using the status system (opslog)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/applying_account.html">How do I get an account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code_development/guides/vs_code/connect_to_server.html">Connecting to a system with Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/remote-desktop.html">Remote Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/R.html">First R calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../nird_archive/user-guide.html">Research Data Archive (NIRD RDA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../services/easydmp-user-documentation.html">EasyDMP User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hpc_machines/migration2metacenter.html">Migration to an NRIS HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../computing/responsible-use.html">Using shared resources responsibly</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jobs/overview.html">Running jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../computing/tuning-applications.html">Tuning applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code development and tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../code_development/overview.html">Code development and tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../software/modulescheme.html">Software module scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/installed_software.html">Installed software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/userinstallsw.html">Installing software as user</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/licenses.html">Licence and access policies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Files, storage and backup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/nird_lmd.html">NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/quota.html">Storage quota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files_storage/performance.html">Optimizing storage performance</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Sigma2/NRIS documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Questions and answers from Best Practices on NRIS Clusters Nov 2022, Day 1 (Nov 1)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/UNINETTSigma2/documentation/blob/main/training/material/2022-autumn-best-practices/q-and-a-day1.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="questions-and-answers-from-best-practices-on-nris-clusters-nov-2022-day-1-nov-1">
<span id="training-2022-autumn-best-practices-notes-day1"></span><h1><a class="toc-backref" href="#id1" role="doc-backlink">Questions and answers from Best Practices on NRIS Clusters Nov 2022, Day 1 (Nov 1)</a><a class="headerlink" href="#questions-and-answers-from-best-practices-on-nris-clusters-nov-2022-day-1-nov-1" title="Link to this heading"></a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#questions-and-answers-from-best-practices-on-nris-clusters-nov-2022-day-1-nov-1" id="id1">Questions and answers from Best Practices on NRIS Clusters Nov 2022, Day 1 (Nov 1)</a></p>
<ul>
<li><p><a class="reference internal" href="#icebreaker-question" id="id2">Icebreaker Question</a></p></li>
<li><p><a class="reference internal" href="#questions" id="id3">Questions</a></p>
<ul>
<li><p><a class="reference internal" href="#hardware-overview" id="id4">Hardware overview</a></p></li>
<li><p><a class="reference internal" href="#queue-systems" id="id5">Queue systems</a></p></li>
<li><p><a class="reference internal" href="#using-the-hpc-resources-effectively" id="id6">Using the HPC resources effectively</a></p></li>
<li><p><a class="reference internal" href="#exercise-12-00-12-15-demo" id="id7">Exercise 12:00-12:15 (demo)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#feedback-for-the-day" id="id8">Feedback for the day</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="icebreaker-question">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Icebreaker Question</a><a class="headerlink" href="#icebreaker-question" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>What would you like to get out of this workshop?</p>
<ul>
<li><p>Better scripting for repetitive tasks</p></li>
<li><p>Learning how to run code on clusters optimally, for example how to set the number of nodes, tasks, tasks per node, cpus per task, threads per core, etc. in a sensible way.</p></li>
<li><p>Using VScode on server</p></li>
</ul>
</li>
</ul>
</section>
<section id="questions">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Questions</a><a class="headerlink" href="#questions" title="Link to this heading"></a></h2>
<section id="hardware-overview">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Hardware overview</a><a class="headerlink" href="#hardware-overview" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Is there internet access from compute nodes? if not why</p>
<ul class="simple">
<li><p>Not all sites are reachable from compute nodes.</p></li>
<li><p>In special cases it is possible to setup a proxy.</p></li>
<li><p>Compute nodes are meant to be used in analysis work, waiting for data download might  waste resources.</p>
<ul>
<li><p>RB: For very many use cases the occasional network access might not have any effect on resource use for others.</p></li>
</ul>
</li>
<li><p>RB: as far as I know/understand, there is some network access from compute nodes via so-called proxy servers which allows access such as “git clone” and possibly “pip install” and access to license servers and similar. If your application needs network access and it cannot access it from compute, can you please reach out to us? It might be fixable.</p></li>
<li><p>http/https access usually works, e.g., downloading with <code class="docutils literal notranslate"><span class="pre">wget</span></code>, <code class="docutils literal notranslate"><span class="pre">curl</span></code> and using package managers. However, it works differently for interactive and batch jobs. For interactive jobs, the environment should be set up correctly. Test by submitting an interactive job and then run <code class="docutils literal notranslate"><span class="pre">env</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">http</span></code>. If you see two lines such as <code class="docutils literal notranslate"><span class="pre">http_proxy=http://proxy.saga:3128/</span></code> and <code class="docutils literal notranslate"><span class="pre">https_proxy=http://proxy.saga:3128/</span></code> the environment is set up correctly (note, <code class="docutils literal notranslate"><span class="pre">http</span></code> without the <code class="docutils literal notranslate"><span class="pre">s</span></code> for <code class="docutils literal notranslate"><span class="pre">https_proxy</span></code> is not a typo). If you run a batch job, you may have to add the parameter <code class="docutils literal notranslate"><span class="pre">--get-user-env</span></code> when submitting jobs (note, this parameter is disabled for interactive jobs). Again, in the job, one can check if the environment is set up correctly by running <code class="docutils literal notranslate"><span class="pre">env</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">http</span></code>. If you see something like <code class="docutils literal notranslate"><span class="pre">http_proxy=http://proxy.saga:3128/</span></code> and <code class="docutils literal notranslate"><span class="pre">https_proxy=http://proxy.saga:3128/</span></code> the environment is set up correctly (note, <code class="docutils literal notranslate"><span class="pre">http</span></code> without the <code class="docutils literal notranslate"><span class="pre">s</span></code> for <code class="docutils literal notranslate"><span class="pre">https_proxy</span></code> is not a typo).</p></li>
</ul>
</li>
<li><p>Explanation: NVMe drives: fast solid-state drives which are very “close” to the cores and where file operations don’t have to travel through network and do not affect the parallel file system. In other words if your application can use local disk, please do.</p>
<ul class="simple">
<li><p>only available on Saga</p>
<ul>
<li><p>or also Fram? “A job on Fram/Saga can request a scratch area on local disk”</p></li>
<li><p>Yes, also on Fram.  On Saga, it is NVMe, while on Fram, it is SSD (also faster than /cluster, but not as fast as on NVMe).</p></li>
</ul>
</li>
<li><p>more info: https://documentation.sigma2.no/files_storage/clusters.html#job-scratch-area-on-local-disk</p></li>
</ul>
</li>
<li><p>How do I use this so called local scratch</p>
<ul class="simple">
<li><p>We have documented the instructions <a class="reference external" href="https://documentation.sigma2.no/jobs/scratchfiles.html">here</a></p></li>
<li><p>also: https://documentation.sigma2.no/files_storage/clusters.html#job-scratch-area-on-local-disk</p></li>
</ul>
</li>
<li><p>What is object storage? How does it differ from file storage?</p>
<ul class="simple">
<li><p>As users you could use this as normal storage, i.e. no need to do anything different.</p></li>
<li><p>Usually you have to use specific tools to access object storage, that is for storing data, retrieving data, for listing what is stored in the storage. So it works differently than a normal filesystem (like <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>). There may exist tools which let you mount a “bucket” into your file system and then you can use it like a normal file system. E.g., you could try that within a container.</p></li>
<li><p>If you want more details, it is described <a class="reference external" href="https://documentation.sigma2.no/files_storage/performance.html">here</a></p></li>
</ul>
</li>
<li><p>How should you download/upload a big database? It is too big for my laptop storage to download and then upload.</p>
<ul class="simple">
<li><p>You could do this from the login node.</p></li>
<li><p>If it is useful for many, then you could request and we can set this up centrally.</p></li>
<li><p>Some examples of centrally setup databases are in <code class="docutils literal notranslate"><span class="pre">/cluster/shared/databases/</span></code></p>
<ul>
<li><p>ls: cannot access /cluster/shared/databases: No such file or directory</p>
<ul>
<li><p>The location is on SAGA, fram we do not have that</p></li>
<li><p>On Fram there are some shared databases here <code class="docutils literal notranslate"><span class="pre">/cluster/shared/</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>I did not find it, i specifically need the DRAM db</p>
<ul>
<li><p>Can you please give some more details. A link to what this means and whether this is something that would be useful for others</p></li>
</ul>
</li>
</ul>
</li>
</ol>
</section>
<section id="queue-systems">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Queue systems</a><a class="headerlink" href="#queue-systems" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="6">
<li><p>I like the “Do Try This at Home” :-)</p>
<ul class="simple">
<li><p>Thanks! :D</p></li>
</ul>
</li>
<li><p>Backfilling is like “this table is reserved but they won’t arrive before 19:00 so you can use it until then”</p>
<ul class="simple">
<li><p>That was a very good way of putting it!  I’ll “steal” that – Bhm. :)</p></li>
<li><p>Yes. This is to use the overall system in an optimal way.</p></li>
<li><p>A job that is submitted later than a job that is ahead in the queue and that will not affect the future schedule jobs, should start now, isn’t that fair?</p>
<ul>
<li><p>yes.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Should we prefer mpirun or srun in job scripts for MPI-aware calculations?</p>
<ul class="simple">
<li><p>This depends on the MPI flavour you use, see the link below for details</p></li>
<li><p>There are some documentation on this, because it depends on the cluster: <a class="reference external" href="https://documentation.sigma2.no/jobs/guides/running_mpi_jobs.html?highlight=mpi">click here</a></p></li>
</ul>
</li>
<li><p>How do you know how many tasks you have/need?</p>
<ul class="simple">
<li><p>The first thing to consider is to see if your program can use more than one core(task) at the same time. A program that cannot do this will not go faster by pumping more cores</p>
<ul>
<li><p>So different tasks will run on different cores?</p>
<ul>
<li><p>Yes, Slurm (in our setup) will hand out one core (or more) to each task - and will never hand out the same core to more than one task or job.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>If your program can use more than one core at the same time, most programs has an optimal number. i.e. the processing will become faster with more tasks, then at some point it will not go any fast and even become slower</p></li>
<li><p>Some time we might have to change the code slightly . For this we have advanced user support . <a class="reference external" href="https://www.sigma2.no/enabling-code-for-hpc-through-advanced-user-support">here is as example</a></p></li>
<li><p>also more about that later today and also tomorrow. we will also practice this</p></li>
<li><p>Just to be sure, the number of tasks is different from using array=1-n in the slurm script?</p>
<ul>
<li><p>yes, –array submits an array of individual jobs, while –ntasks is how many tasks each job asks for.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>What is a good way to estimate how much memory is needed before running a job?</p>
<ul class="simple">
<li><p>we will discuss and practice tomorrow</p></li>
<li><p>but until then: https://documentation.sigma2.no/jobs/choosing-memory-settings.html</p></li>
</ul>
</li>
<li><p>Some Slurm terms</p></li>
</ol>
<ul class="simple">
<li><p>Priority: All jobs starts with same priority, then more you wait priority will increase</p></li>
<li><p>Requeue : After nodes (a compute nodes) was allocated, if this had to be changed( may the compute node whent donw) another node had to be used , this value should used along side <em>Restarts</em></p></li>
<li><p>EligibleTime: The time Slurm decided that your job is ready to start, the start time might differe due to other factors (e.g. requeue)</p></li>
<li><p>Partition: We have different partitions (https://documentation.sigma2.no/jobs/choosing_job_types.html#job-types)</p></li>
<li><p>NodeList: The compute nodes used for analysis</p></li>
</ul>
<ul class="simple">
<li><p>Yes, please &lt;3</p></li>
<li><p><a class="reference external" href="https://slurm.schedmd.com/documentation.html">Slurm Documentation</a></p></li>
<li><p><a class="reference external" href="https://documentation.sigma2.no/jobs/submitting/queue_system_concepts.html">Local slurm concept documentation</a></p></li>
</ul>
<ol class="arabic simple" start="12">
<li><p>Where can we find the presentations used today?</p>
<ul class="simple">
<li><p>Linked from here : https://documentation.sigma2.no/training/events/2022-11-best-practices-on-NRIS-clusters.html#schedule</p></li>
</ul>
</li>
</ol>
</section>
<section id="using-the-hpc-resources-effectively">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Using the HPC resources effectively</a><a class="headerlink" href="#using-the-hpc-resources-effectively" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="13">
<li><p>What is the difference between mpirun and srun?</p>
<ul class="simple">
<li><p>see also 8) but as far as I understand, I look at “srun” as being “mpirun” with stuff around it that integrates well with the rest of the job but as listed in 8) whether to use one or the other depends on machine</p></li>
</ul>
</li>
<li><p>Can the MPI jobs not be distributed to the number of hyperthreads? (64 on fram for instance?)</p>
<ul class="simple">
<li><p>By default: no.  But you <em>can</em> override it, if you really want.  For most programs, using both hyperthreads will not make the program run faster.</p></li>
</ul>
</li>
<li><p>about redirecting logs to /dev/null:</p>
<ul class="simple">
<li><p>I would only worry about redirecting if your application writes a lot of data from many processes in many small chunks in little time intervals. otherwise it can be pity to not have logs when a computation crashes and we have then no idea why since the logs are gone.</p></li>
</ul>
</li>
</ol>
</section>
<section id="exercise-12-00-12-15-demo">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Exercise 12:00-12:15 (demo)</a><a class="headerlink" href="#exercise-12-00-12-15-demo" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Scaling Exercise: Copy the directory <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">/cluster/projects/nn9984k/best_practices/Day1/scaling</span>&#160; <span class="pre">.</span></code></p></li>
<li><p>Follow the instruction in <code class="docutils literal notranslate"><span class="pre">README.txt</span></code></p></li>
<li><p>Use training project Account and reservation while running your exercise</p></li>
</ul>
<ol class="arabic simple" start="16">
<li><p>So, the documentations says to not use mpirun on saga.. Is this case specific? (https://documentation.sigma2.no/jobs/guides/running_mpi_jobs.html?highlight=mpi)</p>
<ul class="simple">
<li><p>good question. answering as staff [name=RB], I think our documentation needs to become clearer in this recommendation. It is for me not clearly enough communicated whether I should use srun or mpirun.</p>
<ul>
<li><p>“mpirun can get the number of tasks wrong and also lead to wrong task placement.”</p>
<ul>
<li><p>yes and I wrote that sentence :-) [RB] since it used to be like that on some clusters. what I am unsure about is whether this is still the case. Personally I use srun on Saga. few years ago when I wrote that, with mpirun on Saga the tasks sometimes did not end up on the allocated cores and the computation took longer since they were fighting over resources and some resources were idling.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Is there any way to predict how well a program will scale from how the code is written or something?</p>
<ul class="simple">
<li><p>looking at the code might give an idea where bottlenecks might start appearing as we increase the number of cores but it is almost always easer to “profile”: run and analyze and then analyze again and then look at the code with the information of a profiling run. sometimes, surprising bottlenecks might appear. as we increase the system size, different parts of the code will have different scaling behaviours and unexpected code portions can take over and dominate run time.</p></li>
<li><p>depending on which parallelizing strategy and tool is used, one can estimate limitations. for instance: if this a shared-memory parallelization (e.g. OpenMP), it probably cannot go beyond one node so the limitation is the number of cores that can access the same memory.</p></li>
<li><p>if no parallelization strategy is used, then the code won’t scale beyond 1 core and there we need to parallelize at the Slurm level</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="feedback-for-the-day">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Feedback for the day</a><a class="headerlink" href="#feedback-for-the-day" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>One thing you thought was nice</p>
<ul>
<li><p>The last demo was nice.</p></li>
</ul>
</li>
<li><p>One thing we should change/improve tomorrow and next events</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sigma2/NRIS. Text shared under CC-BY 4.0 license.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<!-- Integrate opslog banner -->
<span class="sp-status"></span>
<script>
  window.statuspalWidget = {
    subdomain: 'sigma2-nris',
    host: 'https://statuspal.eu',
    badge: {
      enabled: false,
      selector: '.sp-status', 
    },
    banner: {
      enabled: true,
      position: 'top-right',
    }
  }
</script>
<script src="https://statuspal.io/js/widget.js"></script>


</body>
</html>